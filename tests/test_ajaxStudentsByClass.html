<!DOCTYPE html>
<html>
<head>
	<title>testFetchStudents</title>
</head>
<body>
<!--<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.2.min.js"></script>-->

<script type="text/javascript">
/*$(document).ready(function () {
	$(".search").click(function (evt) {
		evt.preventDefault();

		var val = $("#classCode").val();

		if (val) {
			$.ajax({
				url: "test_studentsByClass.php",
				type: "POST",
				data: {'cc':val}
			}).done(function (d) {
				console.log(d);
			});
		}
	});
});*/
var sitefn = {
	getAjax: function () {
		if (window.XMLHttpRequest) {
			return new XMLHttpRequest();
		} else {
			return new ActiveXObject("Microsoft.XMLHTTP");
		}
	},
	doAjax: function (data) {
		var xmlhttp = this.getAjax(),
			params = "cc="+data;

		xmlhttp.open('POST', 'test_studentsByClass.php');

		xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xmlhttp.setRequestHeader("Content-length", params.length);
		xmlhttp.setRequestHeader("Connection", "close");

		xmlhttp.onreadystatechange = function () {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				console.log(xmlhttp.responseText);
				console.log(xmlhttp);
			}
		}
		xmlhttp.send(params);
	}
}

</script>

<form id="ccForm">
	<p>
		<label for="classCode">Klassekode
			<select onchange="sitefn.doAjax(this.value)" onfocus="sitefn.doAjax(this.value)" id="ccSelect">
				<option value="IS1">Informasjonssystemer 1. År</option>
				<option value="HISTORIE1">Historie 1. År</option>
			</select>
		</label>
	</p>
	<button class="search">SØK</button>
</form>

<div class="hidden">
	<p>This should be hidden.</p>
	<ul id="students"></ul>
</div>

</body>
</html>